<div class="col-12 text-muted d-flex justify-content-center">
  <h5>
    <strong>Levantamento de produção e renda de produtor rural</strong>
  </h5>
</div>
<div class="container-fluid">
    <div class="col-12" [formGroup]="visitaForm">
      <div class="row g-3">
        <div class="row">
          <div class="col-9">
            <label for="local-do-atendimento" class="form-label">Local do Atendimento</label>
            <input type="text" class="form-control" id="local-do-atendimento" placeholder="Fazenda, Sitio..."
              formControlName="localDoAtendimeno">
          </div>
          <div class="col-3">
            <label for="data-da-visita" onclick="this.select()" class="form-label">Data da visita</label>
            <input type="date" class="form-control" pattern="\d{4}-\d{2}-\d{2}" id="data-da-visita" placeholder="19/06/2020"
              formControlName="dataDaVisita">
          </div>
        </div>
      </div>
      <div class="col-12 m-2 text-muted d-flex justify-content-center">
        <h6>
          <strong>Informações sobre o produtor atendido</strong>
        </h6>
      </div>  
      <div class="border m-2 pb-2 row" [formGroup]="produtoresForm">
        <div class="col-md-3">
          <label for="cpf-do-produtor" class="form-label">CPF</label>
          <input type="text" onclick="this.select()" class="form-control" id="cpf-do-produtor" formControlName="cpf" mascara="999.999.999-99">
        </div>
        <div class="col-md-5">
          <label for="nome-do-produtor" class="form-label">Nome</label>
          <input type="text" onclick="this.select()" class="form-control" id="nome-do-produtor" formControlName="nome">
        </div>
        <div class="col-4 d-flex align-items-end">
          <button title="" class="btn btn-primary" (click)="incluirProdutor($event)" [disabled]="!produtoresForm.valid">
            <span><span class="fas fa-user-plus"></span></span> Incluir
          </button>
        </div>
      </div>
      <div class="col-12 text-muted d-flex justify-content-center">
        <h6>
          <strong>Descrição de renda</strong>
        </h6>
      </div>
      <div class="border m-2 pb-2 row" [formGroup]="servicosForm">
        <div class="col-12">
          <label for="descricao-do-servico" class="form-label">Descrição da renda</label>
          <input type="text" onclick="this.select()" class="form-control" id="descricao-do-servico"
            placeholder="Venda de Bezerros de 8 @"
            formControlName="servicoPrestado">
        </div>
        <div class="col-12">
          <label for="ocorrencia" class="form-label">Ocorrência</label>
          <input type="text" onclick="this.select()" class="form-control" id="ocorrencia" placeholder="***" 
          formControlName="ocorrencia">
        </div>
        <div class="row mt-2">
          <div class="col-2">
            <label for="valor-do-servico" class="form-label">Valor do serviço</label>
            <input type="number" onclick="this.select()" class="form-control" id="valor-do-servico" placeholder="150"
              formControlName="valor">
          </div>
          <div class="col-4 d-flex align-items-end">
            <button title="" class="btn btn-primary" (click)="incluirServico($event)" [disabled]="!servicosForm.valid">
              <span><span class="fas fa-mug-hot"></span></span> Incluir
            </button>
          </div>
        </div>
      </div>
      <div class="col-12">
        <label for="situacao-atual" class="form-label">Situação atual</label>
        <textarea type="text" onclick="this.select()" class="form-control texto" id="situacao-atual"
          placeholder="O produtor reclama que a vaca dá pouco leite" 
          formControlName="situacaoAtual"></textarea>
      </div>
      <div class="col-12">
        <label for="orientacoes" class="form-label">Orientações</label>
        <textarea type="text" onclick="this.select()" class="form-control texto" id="orientacoes"
          placeholder="Administrar o suao de suplementação alimentar e disponibilizar água de qualidade"
          formControlName="orientacao"></textarea>
      </div>
      <div class="col-12">
        <label for="recomendaoes"  class="form-label">Recomendações</label>
        <textarea type="text" onclick="this.select()" class="form-control texto" id="recomendaoes" placeholder="Suplementar com ração 18% PB"
          formControlName="recomendacao"></textarea>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-6">
        <table class="col-6 table">
          <thead>
            <tr>
              <th></th>
              <th>CPF</th>
              <th>Nome</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let prd of produtores">
              <td>
                <button type="button" class="btn btn-danger btn-sm btn-custom"
                (click)="removerProdutor(prd, $event)"
                >
                  <i class="far fa-calendar-times"></i>
                </button>
              </td>
              <td>{{prd.cpf}}</td>
              <td>{{prd.nome}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-6">
        <table class="col-6 table">
          <thead>
            <tr>
              <th></th>
              <th>Servico</th>
              <th>Valor</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let call of chamadas">
              <td>
                <button type="button" class="btn btn-danger btn-sm btn-custom"
                (click)="removerChamada(call, $event)">
                  <i class="far fa-calendar-times"></i>
                </button>
              </td>
              <td>{{call.servicoPrestado}}</td>
              <td>{{call.valor}}</td>
            </tr>
          </tbody>
        </table>
  
      </div>
    </div>
  </div>
  <div class="col-12">
    <button class="btn btn-primary" (click)="registrarVisita()" [disabled]="!visitaForm.valid">Registrar</button>
  </div>
